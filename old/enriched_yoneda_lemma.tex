\documentclass{article}
\usepackage{strd,cat,my,amsmath,stmaryrd}
\usepackage[active,tightpage]{preview}


\begin{document}

%flip bijection
\myin[preview,math,aligned]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{u} \strdroadlabel{u}{X}{Z}
        \strduse{mid}{u}{z} \strdsidelabel{z}{}{Z}
        \strdroad{mid}{z}{yz} \strdroadlabel{yz}{Y}{Z}
        \strduse{right}{yz}{x} \strdsidelabel{x}{}{X}
        \strdscale{2}{2}{\strdbijsq{z}{bi}}
        \strdhleft{bi}{yp}
        \strdrchange{yp}{y} \strdsidelabel{y}{}{Y}
        \strdlchange{x}{x2} \strdsidelabel{x2}{}{X}
        \strdcellnode{yz End}{g}
        \strdmid{y}{y2} \strdsidelabel{y2}{}{Y}
        \strdscale{3}{5}{\strdbijsq{u}{bo}}
        \strdstartlabel{u}{(\mathcal{V})}
    }
}
        
\myin[preview,math,aligned]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{u} \strdroadlabel{u}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{u End}{\scriptstyle\int^{\operatorname{Y}}_A}
        \strdmid{u}{u2} \strdsidelabel{u2}{}{FK}
        \strdstartlabel{u}{(\mathcal{V})}
    } \mydefeq
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{u} \strdroadlabel{u}{\mathllap{\mathcal{A}(K,A)}}{FA}
        \strdroad{mid}{u}{u2} \strdroadlabel{u2}{FK}{FA}
        \strdcellnode{u2 End}{F}
        \strdroad{mid}{u2}{ka} \strdroadlabel{ka}{K}{A}
        \strduse{mid}{ka}{fk} \strdsidelabel{fk}{}{FK}
        \strdscale{1.5}{2}{\strdbijsq{u}{bo}}
        \strdstartlabel{u}{(\mathcal{V})}
        \strdsqlabel{bo Right}{\operatorname{flip}}
    }
}

\myin[preview,math,aligned]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{xfk} \strdroadlabel{xfk}{X}{FK}
        \strdroad{mid}{xfk}{u2} \strdroadlabel{u2}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{u2 End}{\alpha}
        \strdmid{u2}{fk} \strdsidelabel{fk}{}{X}
        \strdscale{2.3}{2}{\strdlbijsq{u}{bo}}
        \strdscale{1.5}{2}{\strdrbijsq{u}{bo}}
        \strdfamilylabel{bo Right}{}{\mathrlap{\int^{\operatorname{Y}}}}
        \strdstartlabel{xfk}{(\mathcal{V})}
    } &\mydefeq
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{xfk} \strdroadlabel{xfk}{X}{FK}
        \strdroad{mid}{xfk}{xfa} \strdroadlabel{xfa}{X}{FA}
        \strdroad{mid}{xfa}{kafa} \strdroadlabel{kafa}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{kafa End}{\alpha}
        \strduse{mid}{kafa}{x} \strdsidelabel{x}{}{X}
        \strdroad{mid}{x}{ka} \strdroadlabel{ka}{K}{A}
        \strdscale{3}{4}{\strdlbijsq{xfk}{y Left}}
        \strdscale{2.5}{4}{\strdrbijsq{xfk}{y Right}}
        \strdscale{2.5}{2}{\strdlbijsq{xfa}{f Left}}
        \strdscale{1.5}{2}{\strdrbijsq{xfa}{f Right}}
        \strdfamilylabel{y Right}{A}{}
        \strdsqlabel{y Right}{\operatorname{y}}
        \strdsqlabel{f Right}{\operatorname{flip}}
        \strdstartlabel{xfk}{(\mathcal{V})}
    }
}

\myin[preview,math,aligned]{
 %   \strdin[gathered]{
 %       \strdmid{\strdorigin}{u} \strdsidelabel{u}{}{\int_A[\mathcal{A}(K,A),FA]}
 %       \strdbijnode{u End}{\eta}
 %       \strdmid{u}{u2} \strdsidelabel{u2}{}{FK}
 %   } \mydefeq
    \strdin[gathered]{
        \strdmid{\strdorigin}{u} \strdsidelabel{u}{}{\int_A[\mathcal{A}(K,A),FA]}
        \strdroad{mid}{u}{u2} \strdroadlabel{u2}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{u2 End}{\scriptstyle\int ^ {\operatorname{Y}}_A}
        \strdmid{u2}{fk} \strdsidelabel{fk}{}{FK}
        \strdmid{fk}{fk2} \strdsidelabel{fk2}{}{FK}
        \strdscale{2.3}{2}{\strdlbijsq{u}{bo}}
        \strdscale{1.5}{2}{\strdrbijsq{u}{bo}}
        \strdfamilylabel{bo Right}{}{\int}
    }
}

\myin[preview,math,aligned]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{kafa} \strdroadlabel{kafa}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{kafa End}{\alpha}
        \strduse{mid}{kafa}{x} \strdsidelabel{x}{}{X}
        \strdstartlabel{kafa}{(\mathcal{V})}
    } =
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{kafa} \strdroadlabel{kafa}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{kafa End}{\scriptstyle\int ^ {\operatorname{Y}}}
        \strduse{mid}{kafa}{fk} \strdsidelabel{fk}{}{FK}
        \strdbijnode{fk End}{\eta}
        \strduse{mid}{fk}{x} \strdsidelabel{x}{}{X}
        \strdstartlabel{kafa}{(\mathcal{V})}
    } \iff
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{xfk} \strdroadlabel{xfk}{X}{FK}
        \strdcellnode{xfk End}{\eta}
        \strdstartlabel{xfk}{(\mathcal{V})}
    } =
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{xfk} \strdroadlabel{xfk}{X}{FK}
        \strdroad{mid}{xfk}{xfa} \strdroadlabel{xfa}{X}{FA}
        \strdroad{mid}{xfa}{kafa} \strdroadlabel{kafa}{\mathcal{A}(K,A)}{FA}
        \strdbijnode{kafa End}{\alpha}
        \strduse{mid}{kafa}{x} \strdsidelabel{x}{}{X}
        \strdroad{mid}{x}{ka} \strdroadlabel{ka}{K}{A}
        \strdscale{3}{4}{\strdlbijsq{xfk}{y Left}}
        \strdscale{2.5}{4}{\strdrbijsq{xfk}{y Right}}
        \strdscale{2.5}{2}{\strdlbijsq{xfa}{f Left}}
        \strdscale{1.5}{2}{\strdrbijsq{xfa}{f Right}}
        \strdfamilylabel{y Right}{A}{}
        \strdsqlabel{y Right}{\operatorname{y}}
        \strdsqlabel{f Right}{\operatorname{flip}}
        \strdstartlabel{xfk}{(\mathcal{V})}
    }
}
\end{document}
