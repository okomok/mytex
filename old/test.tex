\documentclass{article}
\usepackage{strd,cat,my}
\usepackage[active,tightpage]{preview}

\begin{document}

\myin[preview,math]{
    P =
    \strdfamily{A,B}{
        \strdin[gathered]{
            \strdmid{\strdorigin}{u} \strdsidelabel{u}{A}{A}
        } 
    } =
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdmid{\strdorigin}{u}
        \strdmid{u}{u2} \strdbijlabel{u End}{f}
        \strdmid{u2}{u3} \strdisolabel{u2 End}{g}
        \strdrshifted{mid}{u}{u2s}
        \strdmid{u2s}{u3s}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdmid{\strdorigin}{u}
        \strdroadlshifted{\strdroad{mid}}{u}{u2}
        \strdroadrshifted{mid}{u2}{u3}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdscope{-<-}{
            \strdmid{\strdorigin}{U} \strdsidelabel{U}{A}{B}
            \strdleft{U}{L} \strdsidelabel{L}{C}{D}
            \strdunleft{L}{LU} \strdsidelabel{LU}{E}{F}
            \strdright{U}{R} \strdsidelabel{R}{G}{H}
            \strdunright{R}{UR} \strdsidelabel{UR}{I}{J}
        }
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdsubset{\strdorigin}{U}
        \strdsidelabel{U}{A}{B}
        \strdsupset{U}{U2}
        \strdsidelabel{U2}{C}{D}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strddup{\strdorigin}{U}
        \strdleft{U Left}{L}
        \strdright{U Right}{R}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdrint{\strdorigin}{U}
        \strdsidelabel{U}{A}{B}
        \strdlint{U}{U2}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{U}
        \strdroad{left}{U}{L}
        \strdroad{right}{U}{R}
        \strdroad{unleft}{L}{UL}
        \strdroad{unright}{R}{UR}
        \strdroad{mid}{UL}{U2}
        \strdcelllabel{L Start}{a}
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdscale{2}{2}{
        \strdroad{mid}{\strdorigin}{U}
        \strdroad{left}{U}{L}
        \strdroad{right}{U}{R}
        \strdroad{unleft}{L}{UL}
        \strdroad{right}{UL}{ULR}
        \strdroadx{unright}{R}{UR}
        \strdroadx{left}{UL}{ULL}
        \strdcelllabel{L End}{a}
    }
    }
}

\myin[preview,math]{
    \strdin[gathered]{
        \strdroad{mid}{\strdorigin}{U}
        \strdroad{left}{U}{L}
        \strdroad{mid}{U}{M}
        \strdroad{right}{U}{R}
        \strdroadx{mid}{M}{M2}
        \strdroadx{mid}{M2}{M3}
        \strddeadend{M3}
        \strdroadx{unleft}{L}{UL}
        \strdroadx{right}{UL}{ULR}
        \strdroad{unright}{R}{UR}
        \strdroad{left}{UL}{ULL}
        \strdcelllabel{L End}{a}
        \strdendlabel{ULL}{A B}
        \strdroadlabel{R End}{B}{C}
    }
}

\end{document}

