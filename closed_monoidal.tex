\documentclass{article}
\usepackage{tikz,strd}

\begin{document}

\newcommand{\myf}[1]{
    \strdline{#1}{fz}
    \strdleft{fz}{fy}
    \strdright{fz}{fx}
    \strdcelllabel{fz End}{f}
    \strdlinelabel{fz}{}{Z}
    \strdlinelabel{fy}{}{Y}
    \strdlinelabel{fx}{}{X}
}

\newcommand{\mybf}[1]{
    \strdline{#1}{bfyz}
    \strdscale{1.8}{2}{ \strdbijection{bfyz}{bfbox} }
    \myf{bfyz}
    \strdline{bfbox}{bfx}
    \strdihomlabel{bfyz}{Y}{Z}
    \strdlinelabel{bfx}{}{X}
}

\newcommand{\myh}[1]{
    \strdline{#1}{hx'}
    \strdcelllabel{hx' Start}{h}
    \strdlinelabel{hx'}{}{X'}
}
    

% bijections
\strdpreview{
    \strdgathered{
        \mybf{\strdorigin}
    }
}

\strdpreview{
    \strdgathered{
        \strdassign{mygb}{
            \strdassign{myg}{
                \strdline{\strdorigin}{yz}
                \strdline{yz}{x}
                \strdcelllabel{yz End}{g}
                \strdihomlabel{yz}{Y}{Z}
                \strdlinelabel{x}{}{X}
                \strdcoord{yz Start}{yzc}
            }
            \strdreverse{\strdline{yzc}{z}}
            \strdscale{1.8}{2}{ \strdbijection{yzc}{bj} }
            \strdparallel{bj}{xy}
            \strdlinelabel{z}{}{Z}
            \strdlinelabel{xy Left}{}{Y}
            \strdlinelabel{xy Right}{}{X}
        }
    }
}

% naturality of X

\strdpreview{
    \strdgathered{
        \mybf{\strdorigin}
        \myh{bfx}
    }
    =
    \strdgathered{
        \strdline{\strdorigin}{yz}
        \myf{yz}
        \myh{fx}
        \strdline{fy}{y2}
        \strdscale{2}{3}{\strdbijection{yz}{box}}
        \strdline{box}{x'}
        \strdlinelabel{x'}{}{X'}
        \strdihomlabel{yz}{Y}{Z}
    }
}
\end{document}
