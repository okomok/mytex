\documentclass{article}
\usepackage{strd,cat,my}

\begin{document}

\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A',B')}
        \strdsidelabeled{left}{U}{B}{B'}
        \strdsidelabeled{right}{U}{A}{A'}
        \strdcelllabel{U End}{T}
        \strdstartlabel{U}{\mathcal{C}}
        \strdendlabel{BB'}{\mathcal{B}}
        \strdendlabel{AA'}{\mathcal{A}}
    }
}

% associativity compatible
\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A'',B'')}
        \strddotlabel{U End} \strdstartlabel{U}{\mathcal{C}}
        \strdxscale{2.5}{\strdleft{U}{L}} \strdsidelabel{L}{T(A,B)}{T(A',B')}
        \strdcelllabel{L End}{T}
        \strdsidelabeled{left}{L}{B}{B'}
        \strdendlabel{BB'}{\mathcal{B}}
        \strdsidelabeled{right}{L}{A}{A'}
        \strdendlabel{AA'}{\mathcal{A}}
        \strdxscale{2.5}{\strdright{U}{R}} \strdsidelabel{R}{T(A',B')}{T(A'',B'')}
        \strdcelllabel{R End}{T}
        \strdsidelabeled{left}{R}{B'}{B''}
        \strdendlabel{B'B''}{\mathcal{B}}
        \strdsidelabeled{right}{R}{A'}{A''}
        \strdendlabel{A'A''}{\mathcal{A}}
    } =
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A'',B'')}
        \strdcelllabel{U End}{T} \strdstartlabel{U}{\mathcal{C}}
        \strdxscale{2}{
            \strdsidelabeled{left}{U}{B}{B''}
            \strdsidelabeled{right}{U}{A}{A''}
        }
        \strddotlabel{BB'' End} \strddotlabel{AA'' End}
        \strdleft{BB''}{BB'0} \strdright{AA''}{A'A''0}
        \strdsidelabeled{rbag}{BB''}{B'}{B''}
        \strdsidelabeled{lbag}{AA''}{A}{A'}
        \strdright{B'B''}{B'B''2} \strdsidelabel{B'B''2}{B'}{B''}
        \strdleft{AA'}{AA'2} \strdsidelabel{AA'2}{A}{A'}
        \strdsidelabeled{mid}{BB'0}{B}{B'}
        \strdsidelabeled{mid}{A'A''0}{A'}{A''}
        \strdendlabel{BB'}{\mathcal{B}}
        \strdendlabel{A'A''}{\mathcal{A}}
        \strdendlabel{B'B''2}{\mathcal{B}}
        \strdendlabel{AA'2}{\mathcal{A}}
    }
}

% unit compatible
\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A,B)}
        \strdsidelabeled{left}{U}{B}{B}
        \strdsidelabeled{right}{U}{A}{A}
        \strdcelllabel{U End}{T}
        \strdstartlabel{U}{\mathcal{C}}
        \strddotlabel{BB End}
        \strddotlabel{AA End}
    } =
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A,B)}
        \strddotlabel{U End}
        \strdstartlabel{U}{\mathcal{C}}
    }
}

\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A',B)}
        \strdsidelabeled{mid}{U}{A}{A'}
        \strdcelllabel{U End}{T(\mydash,B)}
        \strdstartlabel{U}{\mathcal{C}}
        \strdendlabel{AA'}{\mathcal{A}}
    } \mydefeq
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A',B)}
        \strdsidelabeled{left}{U}{B}{B}
        \strdsidelabeled{right}{U}{A}{A'}
        \strdcelllabel{U End}{T}
        \strdstartlabel{U}{\mathcal{C}}
        \strddotlabel{BB End}
        \strdendlabel{AA'}{\mathcal{A}}
        %\strdendlabel{BB}{\mathcal{B}}
    }
}
\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B)}{T(A,B')}
        \strdsidelabeled{mid}{U}{B}{B'}
        \strdcelllabel{U End}{T(A,\mydash)}
        \strdstartlabel{U}{\mathcal{C}}
        \strdendlabel{BB'}{\mathcal{B}}
    } \mydefeq
    \strdgathered{
        \strdmid{\strdorigin}{U} \strdsidelabel{U}{T(A,B')}{T(A,B')}
        \strdsidelabeled{left}{U}{B}{B'}
        \strdsidelabeled{right}{U}{A}{A}
        \strdcelllabel{U End}{T}
        \strdstartlabel{U}{\mathcal{C}}
        \strddotlabel{AA End}
        \strdendlabel{BB'}{\mathcal{B}}
    }
}

\strdpreview{
    \strdgathered{
        \strdmid{\strdorigin}{U}
        \strdleft{U}{L}
        \strdright{U}{R}
    }
}
\end{document}
